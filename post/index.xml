<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on hhdx's blog</title><link>https://hhdx.xyz/post/</link><description>Recent content in Posts on hhdx's blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 12 Dec 2020 10:36:40 +0000</lastBuildDate><atom:link href="https://hhdx.xyz/post/index.xml" rel="self" type="application/rss+xml"/><item><title>QEMUå †æº¢å‡ºæ¼æ´----CVE-2015-7504</title><link>https://hhdx.xyz/post/cve-2015-7504/</link><pubDate>Sat, 12 Dec 2020 10:36:40 +0000</pubDate><guid>https://hhdx.xyz/post/cve-2015-7504/</guid><description>&lt;p>CVE-2015-7504æ˜¯QEMUåœ¨ä»¿çœŸpcnetç½‘å¡ä¸­å‡ºç°çš„ä¸€ä¸ªå †æº¢å‡ºæ¼æ´ï¼Œå¯ä»¥æº¢å‡ºå››ä¸ªå­—èŠ‚ï¼Œå¯ä»¥åŠ«æŒç¨‹åºçš„æ‰§è¡Œæµï¼Œç»“åˆå‰é¢çš„CVE-2015-5165å¯ä»¥å®ç°ä»»æ„ä»£ç æ‰§è¡Œã€‚ä½†æœ‰ä¸€ä¸ªå¾ˆè‡´å‘½çš„é—®é¢˜ï¼Œå®¿ä¸»æœºå†…æ ¸éœ€è¦ä½¿ç”¨&lt;code>CONFIG_ARCH_BINFMT_ELF_RANDOMIZE_PIE &lt;/code>æ ‡å¿—è¿›è¡Œç¼–è¯‘ï¼Œå¦åˆ™åœ¨æº¢å‡ºçš„å››ä¸ªå­—èŠ‚æ²¡æ³•æˆåŠŸä¿®æ”¹åœ°å€ï¼ˆæ€»ä½“å…«ä¸ªå­—èŠ‚çš„åœ°å€ï¼Œå› æ­¤éœ€è¦é«˜å››å­—èŠ‚ä¸ç›®æ ‡åœ°å€ä¸€è‡´ï¼‰ã€‚è¿™ä¸ªç¼–è¯‘æ ‡å¿—åœ¨ç›®å‰æœ€æ–°çš„Ubuntu16.04ä¸­ä¼¼ä¹å·²ç»æ²¡æœ‰äº†ï¼Œæ‰€ä»¥å°±ä¸è¿›è¡Œå®Œæ•´çš„å¤ç°äº†ï¼Œä»…å¤ç°è‡³PoCéƒ¨åˆ†ã€‚&lt;/p>
&lt;h2 id="pcnetç½‘å¡">PCNETç½‘å¡&lt;/h2>
&lt;p>AMD çš„PCNETç³»åˆ—ç½‘å¡è¢«è®¸å¤šè™šæ‹Ÿæœºæˆ–ä»¿çœŸå™¨æ”¯æŒï¼Œå¦‚QEMUã€VMwareå’ŒVirtualBoxã€‚è™½ç„¶æ²¡æœ‰RTL8139ç®€æ˜“ï¼Œä½†å®ƒçš„æ”¯æŒæ›´åŠ å¹¿æ³›ï¼ŒRTL8139åªåœ¨QEMUä¸­æœ‰æ”¯æŒã€‚&lt;/p>
&lt;p>ç½‘å¡æœ‰16ä½å’Œ32ä½ä¸¤ç§æ¨¡å¼ï¼Œè¿™å–å†³äºDWIO çš„å€¼ï¼ˆå‚¨å­˜åœ¨å¡ä¸­å˜é‡ï¼‰ï¼Œ16ä½æ¨¡å¼æ˜¯ç½‘å¡é‡ç½®ä¹‹åçš„é»˜è®¤æ¨¡å¼ã€‚ç½‘å¡æœ‰ä¸¤ç±»å†…éƒ¨å¯„å­˜å™¨ï¼šCSRï¼ˆæ§åˆ¶å’ŒçŠ¶æ€å¯„å­˜å™¨ï¼‰å’ŒBCRï¼ˆBus Control Registerï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 0 16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | EPROM |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | RDP - Data reg for CSR |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | RAP - Index reg for CSR and BCR |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | Reset reg |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | BDP - Data reg for BCR |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>QEMUä¿¡æ¯æ³„éœ²æ¼æ´åˆ†æä¸åˆ©ç”¨----CVE-2015-5165</title><link>https://hhdx.xyz/post/cve-2015-5165/</link><pubDate>Sat, 05 Dec 2020 15:58:52 +0000</pubDate><guid>https://hhdx.xyz/post/cve-2015-5165/</guid><description>&lt;p>å‚è€ƒå¤§ä½¬ä»¬çš„æ–‡ç« å¤ç°CVE-2015-5165ã€‚&lt;/p>
&lt;h2 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º&lt;/h2>
&lt;p>å®¿ä¸»æœºç¯å¢ƒ Ubuntu 20.10&lt;/p>
&lt;h3 id="qemuç¼–è¯‘">QEMUç¼–è¯‘&lt;/h3>
&lt;p>QEMU &lt;a href="https://github.com/qemu/qemu/tree/bd80b5963f58c601f31d3186b89887bf8e182fb5">commit-bd80b59&lt;/a>æºç ä¸‹è½½ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ unzip qemu.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir -p bin/debug/native
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> bin/debug/native
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo apt-get install zlib1g-dev libglib2.0-dev libpixman-1-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ../../../configure --target-list&lt;span class="o">=&lt;/span>x86_64-softmmu --enable-debug --disable-werror
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ make
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œç»™æ–‡ä»¶ &lt;code>commands-posix.c&lt;/code> å¢åŠ å¤´æ–‡ä»¶ &lt;code>&amp;lt;sys/sysmacros.h&amp;gt;&lt;/code> å³å¯è§£å†³ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/bin/ld: qga/commands-posix.o: in &lt;span class="k">function&lt;/span> &lt;span class="sb">`&lt;/span>dev_major_minor&lt;span class="s1">&amp;#39;:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">/repo/qemu/qga/commands-posix.c:640: undefined reference to `major&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/ld: /repo/qemu/qga/commands-posix.c:641: undefined reference to &lt;span class="sb">`&lt;/span>minor&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ¶ä½œqemuè™šæ‹Ÿæœº">åˆ¶ä½œQEMUè™šæ‹Ÿæœº&lt;/h3>
&lt;p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„Ubuntu 16.04 Server i386ä½œä¸ºQEMUå®¢æˆ·æœºç³»ç»Ÿã€‚ç‚¹å‡»&lt;a href="https://mirrors6.tuna.tsinghua.edu.cn/ubuntu-releases/xenial/ubuntu-16.04.6-server-i386.iso">ä¸‹è½½&lt;/a>ã€‚&lt;/p>
&lt;p>è¿˜éœ€è¦ä¸‹è½½å®‰è£…VNC-Viewerï¼Œç¨åä¼šç”¨åˆ°ã€‚&lt;a href="https://www.realvnc.com/en/connect/download/viewer/linux/">é“¾æ¥&lt;/a>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./qemu-img create -f qcow2 ~/tmp/vm/ubuntu.img 10G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo dpkg -i VNC-Viewer-6.20.529-Linux-x64.deb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ x86_64-softmmu/qemu-system-x86_64 -boot d -cdrom &lt;span class="se">\ &lt;/span> &lt;span class="c1"># èƒ½ç”¨åµŒå¥—è™šæ‹Ÿå°±ç”¨(æ·»åŠ --enable-kvm)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~/tmp/iso/ubuntu-16.04.6-server-i386.iso &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-hda ~/tmp/vm/ubuntu.img -m &lt;span class="m">1024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vncviewer host:port &lt;span class="c1"># è¿æ¥ä¸Šï¼Œå®‰è£…å°±å¥½&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼ˆå°½é‡ä½¿ç”¨&amp;ndash;enable-kvmï¼Œå¦åˆ™å¡çš„å—ä¸äº†ï¼Œå®‰è£…ç³»ç»Ÿå®‰äº†å››äº”ä¸ªå°æ—¶ã€‚ã€‚ã€‚ï¼‰&lt;/p></description></item><item><title>HITB GSEC 2017ï¼šbabyqemu</title><link>https://hhdx.xyz/post/babyqemu/</link><pubDate>Mon, 30 Nov 2020 12:05:03 +0000</pubDate><guid>https://hhdx.xyz/post/babyqemu/</guid><description>&lt;p>é¢˜ç›®ä¸‹è½½åœ°å€ï¼š&lt;a href="https://github.com/kitctf/writeups/blob/master/hitb-gsec-2017/babyqemu/babyqemu.tar.gz">babyqemu.tar.gz&lt;/a>&lt;/p>
&lt;h2 id="åˆ†æ">åˆ†æ&lt;/h2>
&lt;p>&lt;code>tar xvzf babyqemu.tar.gz&lt;/code>è§£å‹çœ‹åˆ°å¯åŠ¨è„šæœ¬&lt;code>launch.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#! /bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>./qemu-system-x86_64 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-initrd ./rootfs.cpio &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-kernel ./vmlinuz-4.8.0-52-generic &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-append &lt;span class="s1">&amp;#39;console=ttyS0 root=/dev/ram oops=panic panic=1&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-enable-kvm &lt;span class="se">\ &lt;/span> &lt;span class="c1"># éœ€è¦CPU virtualizationï¼Œç°åœ¨ä¸hyper-vå…±å­˜çš„VMwareä¸æ”¯æŒæ­¤é€‰é¡¹ã€‚å¯ä»¥åˆ æ‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-monitor /dev/null &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-m 64M --nographic -L ./dependency/usr/local/share/qemu &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-L pc-bios &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-device hitb,id&lt;span class="o">=&lt;/span>vda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æœ€åä¸€è¡Œå¯ä»¥çœ‹åˆ°è®¾å¤‡åç§°ä¸ºhitbï¼Œåœ¨idaå·¦ä¾§Functions windowï¼Œctrl+fæœç´¢hitbå°±å¯ä»¥æ‰¾åˆ°ç›¸å…³å‡½æ•°ã€‚é€šè¿‡åœ¨idaçš„Local Typesçª—å£æœç´¢hitbå¯ä»¥æ‰¾åˆ°&lt;code>HitbState&lt;/code>ç»“æ„ä½“ï¼Œå…¶ä¸­è¿˜åŒ…å«&lt;code>dma_state&lt;/code>ç»“æ„ä½“ã€‚&lt;/p></description></item><item><title>ã€ç¿»è¯‘ã€‘Virtioï¼šä¸€ç§Linux I/Oè™šæ‹ŸåŒ–æ¡†æ¶</title><link>https://hhdx.xyz/post/virtio-intro/</link><pubDate>Fri, 27 Nov 2020 14:43:05 +0000</pubDate><guid>https://hhdx.xyz/post/virtio-intro/</guid><description>&lt;p>é¦–å‘äºå®‰å…¨å®¢&lt;a href="https://www.anquanke.com/post/id/224001">Virtioï¼šä¸€ç§Linux I/Oè™šæ‹ŸåŒ–æ¡†æ¶ - å®‰å…¨å®¢ï¼Œå®‰å…¨èµ„è®¯å¹³å° (anquanke.com)&lt;/a>&lt;/p>
&lt;p>åŸæ–‡ï¼š&lt;a href="https://developer.ibm.com/articles/l-virtio/">Virtio: An I/O virtualization framework for Linux â€“ IBM Developer&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>å­¦ä¹ Virtioæ¨èé¦–å…ˆçœ‹è¿™ä¸€ç¯‡ï¼Œå›½å†…å¥½å¤šæ–‡ç« å†™çš„å¤ªä¹±äº†ï¼Œçœ‹æ¥çœ‹ä¸å»éƒ½ä¸æ˜ç™½æ•´ä½“çš„æ¶æ„ï¼Œç»™äººå¾ˆæ¨¡ç³Šçš„æ„Ÿè§‰ã€‚è¿™ç¯‡æ–‡ç« å¥½å¾ˆå¤šã€‚&lt;/p>
&lt;p>&lt;strong>å—é™äºä¸ªäººæ°´å¹³ï¼Œç¿»è¯‘è‚¯å®šæœ‰ä¸å¦¥ä¹‹å¤„ï¼Œè¯‘æ³¨æ ¹æ®è‡ªå·±çš„ç†è§£åŠ å…¥ï¼Œä¹Ÿä¸ä¸€å®šå‡†ç¡®ã€‚å¦‚æœ‰é”™è¯¯ï¼Œè¿˜è¯·ä¸åæŒ‡å‡ºã€‚&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;p>ç®€è¨€ä¹‹ï¼Œ&lt;code>virtio&lt;/code>æ˜¯è®¾å¤‡å’ŒåŠè™šæ‹ŸåŒ–ç®¡ç†ç¨‹åº(paravirtualized hypervisor)ä¹‹é—´çš„ä¸€ä¸ªæŠ½è±¡å±‚ã€‚&lt;code>virtio&lt;/code>æ˜¯Rusty Russellä¸ºäº†æ”¯æŒä»–è‡ªå·±çš„è™šæ‹ŸåŒ–æ–¹æ¡ˆ&lt;code>lguest&lt;/code>è€Œå¼€å‘çš„ã€‚è¿™ç¯‡æ–‡ç« ä»¥å¯¹åŠè™šæ‹ŸåŒ–å’Œè®¾å¤‡ä»¿çœŸçš„ä»‹ç»å¼€å§‹ï¼Œç„¶åæ¢å¯»&lt;code>virtio&lt;/code>ä¸­çš„ä¸€äº›ç»†èŠ‚ã€‚é‡‡ç”¨kernel 2.6.30ç‰ˆæœ¬çš„&lt;code>virtio&lt;/code>æ¡†æ¶è¿›è¡Œè®²è§£ã€‚&lt;/p>
&lt;p>Linuxæ˜¯hypervisorçš„â€œæ¸¸ä¹åœºâ€ã€‚æ­£å¦‚æˆ‘åœ¨æ–‡ç« &lt;a href="https://developer.ibm.com/tutorials/l-hypervisor/">ä½¿ç”¨Linuxä½œä¸ºhypervisor&lt;/a>ä¸­æ‰€å±•ç°çš„ï¼ŒLinuxæä¾›äº†è®¸å¤šå…·æœ‰ä¸åŒç‰¹æ€§å’Œä¼˜åŠ¿çš„è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆã€‚ä¾‹å¦‚KVM(Kernel-based Virtual Machine)ï¼Œ&lt;code>lguest&lt;/code>ã€å’Œç”¨æˆ·æ€çš„Linuxã€‚åœ¨Linuxä½¿ç”¨è¿™äº›è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆç»™æ“ä½œç³»ç»Ÿé€ æˆäº†é‡æ‹…ï¼Œå› ä¸ºå®ƒä»¬å„è‡ªéƒ½æœ‰ç‹¬ç«‹çš„éœ€æ±‚ã€‚å…¶ä¸­ä¸€ä¸ªé—®é¢˜å°±æ˜¯è®¾å¤‡çš„è™šæ‹ŸåŒ–ã€‚&lt;code>virtio&lt;/code>ä¸ºå„ç§å„æ ·è®¾å¤‡ï¼ˆå¦‚ï¼šç½‘ç»œè®¾å¤‡ã€å—è®¾å¤‡ç­‰ç­‰ï¼‰çš„è™šæ‹Ÿæä¾›äº†é€šç”¨çš„æ ‡å‡†åŒ–å‰ç«¯æ¥å£ï¼Œå¢åŠ äº†å„ä¸ªè™šæ‹ŸåŒ–å¹³å°çš„ä»£ç å¤ç”¨ã€‚è€Œä¸æ˜¯å„è‡ªä¸ºæ”¿èˆ¬çš„ä½¿ç”¨ç¹æ‚çš„è®¾å¤‡è™šæ‹Ÿæœºåˆ¶ã€‚&lt;/p>
&lt;h2 id="å…¨è™šæ‹ŸåŒ–-vs-åŠè™šæ‹ŸåŒ–">å…¨è™šæ‹ŸåŒ– vs. åŠè™šæ‹ŸåŒ–&lt;/h2>
&lt;p>æˆ‘ä»¬å…ˆæ¥è®¨è®ºä¸¤ç§å®Œå…¨ä¸åŒçš„è™šæ‹ŸåŒ–æ–¹æ¡ˆï¼šå…¨è™šæ‹ŸåŒ–å’ŒåŠè™šæ‹ŸåŒ–ã€‚åœ¨å…¨è™šæ‹ŸåŒ–ä¸­ï¼Œå®¢æˆ·æ“ä½œç³»ç»Ÿåœ¨hypervisorä¸Šè¿è¡Œï¼Œç›¸å½“äºè¿è¡Œäºè£¸æœºä¸€èˆ¬ã€‚å®¢æˆ·æœºä¸çŸ¥é“å®ƒåœ¨è™šæ‹Ÿæœºè¿˜æ˜¯ç‰©ç†æœºä¸­è¿è¡Œï¼Œä¸éœ€è¦ä¿®æ”¹æ“ä½œç³»ç»Ÿå°±å¯ä»¥ç›´æ¥è¿è¡Œã€‚ä¸æ­¤ç›¸åçš„æ˜¯ï¼Œåœ¨åŠè™šæ‹ŸåŒ–ä¸­ï¼Œå®¢æˆ·æœºæ“ä½œç³»ç»Ÿä¸ä»…èƒ½å¤ŸçŸ¥é“å…¶è¿è¡Œäºè™šæ‹Ÿæœºä¹‹ä¸Šï¼Œä¹Ÿå¿…é¡»åŒ…å«ä¸hypervisorè¿›è¡Œäº¤äº’çš„ä»£ç ã€‚ä½†æ˜¯èƒ½å¤Ÿåœ¨å®¢æˆ·æœºå’Œhypervisorçš„åˆ‡æ¢ä¸­ï¼Œå¸¦æ¥æ›´é«˜çš„æ•ˆç‡ï¼ˆå›¾1ï¼‰ã€‚&lt;/p>
&lt;p>&lt;em>è¯‘æ³¨ï¼šå®¢æˆ·æœºä¸hypervisorçš„åˆ‡æ¢ä¸¾ä¾‹ï¼šå®¢æˆ·æœºè¯·æ±‚I/Oï¼Œéœ€è¦hypervisorä¸­æ‰€è™šæ‹Ÿçš„è®¾å¤‡æ¥å“åº”è¯·æ±‚ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿåˆ‡æ¢ã€‚&lt;/em>&lt;/p>
&lt;p>åœ¨å…¨è™šæ‹ŸåŒ–ä¸­ï¼Œhypervisorå¿…é¡»ä»¿çœŸè®¾å¤‡ç¡¬ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ¨¡ä»¿ç¡¬ä»¶æœ€åº•å±‚çš„ä¼šè¯ï¼ˆå¦‚ï¼šç½‘å¡é©±åŠ¨ï¼‰ã€‚å°½ç®¡è¿™ç§ä»¿çœŸçœ‹èµ·æ¥æ–¹ä¾¿ï¼Œä½†ä»£ä»·æ˜¯æä½çš„æ•ˆç‡å’Œé«˜åº¦çš„å¤æ‚æ€§ã€‚åœ¨åŠè™šæ‹ŸåŒ–ä¸­ï¼Œå®¢æˆ·æœºä¸hypervisorå¯ä»¥å…±åŒåˆä½œè®©è¿™ç§ä»¿çœŸå…·æœ‰æ›´é«˜çš„æ•ˆç‡ã€‚åŠè™šæ‹ŸåŒ–ä¸è¶³å°±æ˜¯å®¢æˆ·æœºæ“ä½œç³»ç»Ÿä¼šæ„è¯†åˆ°å®ƒè¿è¡Œäºè™šæ‹Ÿæœºä¹‹ä¸­ï¼Œè€Œä¸”éœ€è¦å¯¹å®¢æˆ·æœºæ“ä½œç³»ç»Ÿåšå‡ºä¸€å®šçš„ä¿®æ”¹ã€‚&lt;/p></description></item><item><title>Qemu Escape ---- ä»¥BlizzardCTF2017_STRNGä¸ºä¾‹</title><link>https://hhdx.xyz/post/qemu-pwn/</link><pubDate>Mon, 23 Nov 2020 15:05:17 +0000</pubDate><guid>https://hhdx.xyz/post/qemu-pwn/</guid><description>&lt;p>æœ€è¿‘æƒ³å­¦ä¸€ä¸‹qemu escapeçš„åŸºç¡€çŸ¥è¯†ï¼Œè¿›è€Œåˆ†æä¸€äº›Qemuçš„CVEæ¼æ´ã€‚&lt;/p>
&lt;p>æœ¬æ–‡ä¸»è¦å‚è€ƒraycpå¸ˆå‚…çš„ä¸¤ç¯‡æ–‡ç« ã€‚[1] [2]&lt;/p>
&lt;h2 id="qemuæ¦‚è¿°">Qemuæ¦‚è¿°&lt;/h2>
&lt;p>æ¯ä¸ªè¿è¡Œçš„qemuè™šæ‹Ÿæœºå¯¹åº”äºhostä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œè™šæ‹Ÿæœºçš„æ‰§è¡Œçº¿ç¨‹ï¼ˆå¦‚CPUçº¿ç¨‹ã€I/Oçº¿ç¨‹ç­‰ï¼‰å¯¹åº”äºqemuè¿›ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/clxsh/pics/master/imgqemu-architecture.png" alt="qemu-architecture">&lt;/p>
&lt;p>qemuçš„å†…å­˜ç»“æ„ï¼Œæ ¹æ®&lt;a href="http://www.phrack.org/papers/vm-escape-qemu-case-study.html">QEMU Case Study&lt;/a>ï¼Œè™šæ‹Ÿæœºå¯¹åº”çš„å†…å­˜ç»“æ„ä¸ºå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> Guest&amp;#39; processes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +--------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Virtual addr space | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +--------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \__ Page Table \__
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \ \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | Guest kernel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----+--------------------+----------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Guest&amp;#39;s phy. memory | | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----+--------------------+----------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \__ \__
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \ \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | QEMU process |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----+------------------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Virtual addr space | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----+------------------------------------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \__ Page Table \__
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \ \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----+-----------------------------------------------++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Physical memory | | ||
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----+-----------------------------------------------++
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Kernel Pwn: ä»å…¥é—¨åˆ°å…¥åœŸ</title><link>https://hhdx.xyz/post/kernel-pwn-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</link><pubDate>Sun, 25 Oct 2020 19:12:40 +0000</pubDate><guid>https://hhdx.xyz/post/kernel-pwn-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</guid><description>&lt;h2 id="misc">MISC&lt;/h2>
&lt;h3 id="å†…æ ¸æ–‡ä»¶åŒºåˆ«">å†…æ ¸æ–‡ä»¶åŒºåˆ«&lt;/h3>
&lt;p>&lt;code>vmlinux&lt;/code> æ˜¯é™æ€é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæœªå‹ç¼©çš„å†…æ ¸ï¼Œæœ€åŸå§‹çš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥è°ƒè¯•ã€‚&lt;/p>
&lt;p>&lt;code>vmlinuz&lt;/code> æ˜¯å¯å¼•å¯¼çš„ã€å‹ç¼©çš„å†…æ ¸ã€‚æ²¡æœ‰è°ƒè¯•ä¿¡æ¯ç­‰æ•°æ®ï¼Œä¸å¯ç”¨äºè°ƒè¯•ã€‚å¯åŠ¨æ—¶ä¼šè‡ªè§£å‹ï¼Œé€šå¸¸ä¼šæ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Decompressing Linux... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Booting the kernel.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>zImage&lt;/code> æ˜¯ç»è¿‡å‹ç¼©çš„å°å†…æ ¸ï¼ˆå°äº512KBï¼‰ã€‚&lt;/p>
&lt;p>&lt;code>bzImage&lt;/code> æ˜¯ç»è¿‡å‹ç¼©çš„å¤§å†…æ ¸ï¼ˆå¤§äº512KBï¼‰ã€‚&lt;/p>
&lt;h3 id="initial-ramdisk">Initial Ramdisk&lt;/h3>
&lt;p>åå­—ç±»ä¼¼&lt;code>initramfs.cpio&lt;/code> æ–‡ä»¶ï¼Œä¸€èˆ¬å¯ä»¥ä½¿ç”¨cpioè¯»å–å…¶ä¸­çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ find . &lt;span class="p">|&lt;/span> cpio -o --format&lt;span class="o">=&lt;/span>newc &amp;gt; initramfs.cpio &lt;span class="c1"># compress&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo cpio -idmv &amp;lt; initramfs.cpio &lt;span class="c1"># depress&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰æ—¶ä¹Ÿç»è¿‡äº†gzipçš„å‹ç¼©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ mv initramfs.cpio initramfs.cpio.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ gunzip initramfs.cpio.gz &lt;span class="c1"># è§£å‹å¾—åˆ°initramfs.cpio&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cpio -idmv &amp;lt; initramfs.cpio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´æ”¹ä¸ºæ­£ç¡®çš„åç¼€ä¹‹åï¼Œå›¾å½¢ç•Œé¢â€œå½’æ¡£ç®¡ç†å™¨â€ä¹Ÿå¯ä»¥æ‰“å¼€ã€‚&lt;/p></description></item><item><title>Arm Pwn</title><link>https://hhdx.xyz/post/arm-pwn/</link><pubDate>Sat, 17 Oct 2020 17:35:26 +0000</pubDate><guid>https://hhdx.xyz/post/arm-pwn/</guid><description>&lt;h2 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ sudo apt install qemu-user gdb-multiarch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å®Œæˆåå°±å¯ä»¥è¿è¡Œå¹³å°ä¸Šçš„é™æ€é“¾æ¥æ–‡ä»¶äº†ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨qemuæ‰§è¡Œã€‚&lt;/p>
&lt;h3 id="åŠ¨æ€é“¾æ¥ç¨‹åº">åŠ¨æ€é“¾æ¥ç¨‹åº&lt;/h3>
&lt;p>å¯¹äºåŠ¨æ€é“¾æ¥çš„ç¨‹åºï¼Œè¿˜éœ€è¦å®‰è£…è·¨å¹³å°çš„libã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ apt-cache search &lt;span class="s2">&amp;#34;libc&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> grep arm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…ç±»ä¼¼libc6-ARCH-crossã€‚&lt;/p>
&lt;p>åŠ¨æ€é“¾æ¥åº“è¢«å®‰è£…åœ¨ç±»ä¼¼&lt;code>/usr/arm-linux-gnueabihf/&lt;/code>çš„è·¯å¾„ã€‚qemuä¸çŸ¥é“åŠ¨æ€é“¾æ¥çš„ä½ç½®ï¼Œå®ƒé¢„æœŸåœ¨ç±»ä¼¼&lt;code>/etc/qemu-binfmt/arm&lt;/code>çš„è·¯å¾„ï¼Œæ‰€ä»¥å¯ä»¥è®¾ç½®è½¯é“¾æ¥æ¥é¿å…ç”¨&lt;code>-L&lt;/code>æ¥æŒ‡å®šé“¾æ¥åº“ä½ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ sudo mkdir /etc/qemu-binfmt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo ln -s /usr/arm-linux-gnueabihf /etc/qemu-binfmt/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo ln -s /usr/aarch64-linux-gnu/ /etc/qemu-binfmt/aarch64 &lt;span class="c1"># å¯¹äºaarch64&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>pwnable.tw re-alloc_revenge</title><link>https://hhdx.xyz/post/pwnable-tw-re-alloc-revenge/</link><pubDate>Mon, 07 Sep 2020 14:48:20 +0000</pubDate><guid>https://hhdx.xyz/post/pwnable-tw-re-alloc-revenge/</guid><description>&lt;h2 id="é¢˜ç›®åˆ†æ">é¢˜ç›®åˆ†æ&lt;/h2>
&lt;p>é˜²æŠ¤æ¯”&lt;a href="https://hhdx.xyz/2020/08/07/pwnable-tw-re-alloc/">re-alloc&lt;/a>å¤šäº†FULL RELROå’ŒPIEã€‚å…¶ä»–æ²¡æœ‰æ”¹å˜ã€‚&lt;/p>
&lt;h2 id="æ€»ä½“æ€è·¯">æ€»ä½“æ€è·¯&lt;/h2>
&lt;p>ç¨‹åºæ²¡æœ‰showå‡½æ•°ï¼Œæ‰€ä»¥é€šè¿‡ä¿®æ”¹stdoutçš„æ–¹å¼æ³„éœ²libcã€‚&lt;/p>
&lt;p>å°†ä¸€ä¸ªchunkåŒæ—¶é‡Šæ”¾åˆ°tcacheå’Œunsorted binï¼Œpartial overwrite fdéƒ¨åˆ†ï¼ŒæŒ‡å‘stdoutï¼Œéœ€è¦çˆ†ç ´4bitã€‚å–å¾—stdoutåä¿®æ”¹è¿›è¡Œæ³„éœ²ã€‚&lt;/p>
&lt;p>æœ€åä¿®æ”¹&lt;code>__realloc_hook&lt;/code>ä¸ºone_gadgetå¾—åˆ°shellã€‚&lt;/p>
&lt;p>ä¸»è¦éš¾ç‚¹åœ¨å¸ƒå±€æ„é€ ã€‚&lt;/p></description></item><item><title>R7000æ¢…æ—æ­å»ºipv6ä»£ç†</title><link>https://hhdx.xyz/post/r7000%E6%A2%85%E6%9E%97%E6%90%AD%E5%BB%BAipv6%E4%BB%A3%E7%90%86/</link><pubDate>Tue, 01 Sep 2020 08:55:50 +0000</pubDate><guid>https://hhdx.xyz/post/r7000%E6%A2%85%E6%9E%97%E6%90%AD%E5%BB%BAipv6%E4%BB%A3%E7%90%86/</guid><description>ç›®å‰å®½å¸¦åŸºæœ¬éƒ½æ”¯æŒäº†ipv6(å¯èƒ½éœ€è¦è‡ªå·±åœ¨å…‰çŒ«å¼€å¯)ï¼Œä¸ºäº†åœ¨å­¦æ ¡çœæµé‡ï¼Œåˆ©ç”¨å®¶åº­å®½å¸¦çš„ipv6ç¯å¢ƒæ­ä¸€ä¸ªä»£ç†ã€‚ R7000å›ºä»¶ç‰ˆæœ¬æ˜¯kool</description></item><item><title>pwnable.tw tcache_tear seethefile</title><link>https://hhdx.xyz/post/pwnable-tw-tcache-tear-seethefile/</link><pubDate>Wed, 19 Aug 2020 17:26:17 +0000</pubDate><guid>https://hhdx.xyz/post/pwnable-tw-tcache-tear-seethefile/</guid><description>&lt;h1 id="tcache_tear">tcache_tear&lt;/h1>
&lt;h2 id="åˆ†æ">åˆ†æ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Arch: amd64-64-little
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RELRO: Full RELRO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack: Canary found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NX: NX enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PIE: No PIE (0x400000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FORTIFY: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">libc_version: Ubuntu GLIBC 2.27-3ubuntu1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¨‹åºå¼€å§‹åœ¨bssæ®µä¸Šè¯»å…¥äº†ä¸€ä¸ª0x20çš„åå­—&lt;/p>
&lt;p>malloc: è¾“å…¥æŒ‡å®šsizeï¼Œåˆ†é…ï¼ŒæŒ‡é’ˆptråŒæ ·å­˜å‚¨åœ¨bssï¼Œè¯»å…¥size-16çš„å­—ç¬¦ï¼Œè¿™é‡Œå­—ç¬¦ä¸ªæ•°å¯ä»¥æº¢å‡º&lt;/p>
&lt;p>free: é‡Šæ”¾ptrç©ºé—´ï¼ŒæŒ‡é’ˆæ‚¬ç©ºï¼Œå¯ä»¥double freeï¼Œç¨‹åºä½¿ç”¨äº†tcacheï¼Œä¸”åœ¨è¿™ä¸ªç‰ˆæœ¬é‡Šæ”¾æ²¡æœ‰ä»»ä½•çš„æ£€æŸ¥&lt;/p>
&lt;p>info: æ‰“å°å§“å&lt;/p>
&lt;h2 id="æ€»ä½“æ€è·¯">æ€»ä½“æ€è·¯&lt;/h2>
&lt;p>åˆ©ç”¨tcache double freeï¼Œå¯ä»¥å¯¹ä»»æ„åœ°å€è¿›è¡Œæ”¹å†™ã€‚åœ¨nameå¤„ä¼ªé€ ä¸€ä¸ªchunké‡Šæ”¾åˆ°unsorted binï¼Œè¿›è¡Œlibc baseçš„æ³„éœ²ã€‚å°†&lt;code>__free_hook&lt;/code>æ”¹å†™ä¸ºsystemåœ°å€ã€‚&lt;/p>
&lt;p>ä¼ªé€ chunkæ³¨æ„ç»•è¿‡freeçš„æ‰€æœ‰æ£€æŸ¥ã€‚ä¼ªé€ å®Œæˆçš„ç»“æ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">+----------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| 0x421 |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| 0x21 |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| 0x21 |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>tcacheé»˜è®¤æœ€å¤šæœ‰64ä¸ªï¼Œç¬¬1ä¸ªæ˜¯0x20å¤§å°ï¼Œé€’æ¨ç¬¬64ä¸ªä¹Ÿå°±æ˜¯0x410ã€‚æ‰€ä»¥å°†nameå¤„ä¼ªé€ ä¸º0x420å¤§å°ã€‚ç¬¬ä¸€ä¸ªchunkçš„&lt;code>chunk-&amp;gt;size=0x420|pre_in_use&lt;/code>ï¼Œé¿å…backward consolidateï¼Œç¬¬ä¸‰ä¸ªchunkçš„&lt;code>chunk-&amp;gt;size=0x20|pre_in_use&lt;/code>ï¼Œé¿å…forward consolidateã€‚&lt;/p></description></item><item><title>ç¡®å®šglibcç‰ˆæœ¬,ä»¥æŒ‡å®šglibcè¿è¡Œç¨‹åº</title><link>https://hhdx.xyz/post/%E4%BB%A5%E6%8C%87%E5%AE%9Alibc%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F/</link><pubDate>Sat, 08 Aug 2020 09:08:15 +0000</pubDate><guid>https://hhdx.xyz/post/%E4%BB%A5%E6%8C%87%E5%AE%9Alibc%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F/</guid><description>&lt;h2 id="å‰è¨€">å‰è¨€&lt;/h2>
&lt;p>CTFé¢˜ç›®ä¸­ç»å¸¸ä¼šç»™å‡ºlibcçš„æ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯ç¡®å®šlibcçš„ç‰ˆæœ¬ï¼Œå¯¹ç¨‹åºè¿›è¡Œé’ˆå¯¹æ€§çš„æ”»å‡»ã€‚æœ€ç›´æ¥çš„ç¡®å®šæ–¹æ³•å°±æ˜¯ç›´æ¥è¿è¡Œè¯¥libc&lt;code>./libc.so.6&lt;/code>ï¼Œä½†é€šå¸¸ç”±äºæœ¬æœºldç‰ˆæœ¬ä¸libcç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå‘ç”Ÿæ®µé”™è¯¯ã€‚&lt;/p>
&lt;p>ç¡®å®šå®Œå¤§ç‰ˆæœ¬å·è¿˜ä¸å¤Ÿï¼Œå› ä¸ºå°±ç®—æ˜¯åŒä¸€ç‰ˆæœ¬çš„libcä¹Ÿä¼šæœ‰è¾ƒå¤§çš„å˜åŠ¨ã€‚æ¯”æ–¹è¯´ï¼Œä¸æœ€å¼€å§‹çš„2.29ç‰ˆæœ¬ç›¸æ¯”ï¼Œgnu libcåº“çš„release/2.29/masteråˆ†æ”¯çš„&lt;code>tcache_perthread_struct-&amp;gt;counts&lt;/code>çš„å˜é‡ç±»å‹éƒ½å˜äº†ï¼›&lt;code>__libc_malloc&lt;/code>ä¸­å–ç”¨tcacheçš„åˆ¤å®šï¼Œä¹Ÿç”±åˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºå˜æˆäº†åˆ¤æ–­countsæ˜¯å¦å¤§äº0ã€‚è¿™äº›ç»†èŠ‚å¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“äº†exploitçš„ä¹¦å†™ã€‚&lt;/p>
&lt;p>ä¸‹é¢ä»¥pwnable.tw re-allocçš„&lt;a href="https://github.com/clxsh/ctf_wps/blob/master/pwnable.tw/Re-alloc/libc.so.6">libc&lt;/a>ä¸ºä¾‹ï¼Œå†™ä¸€å†™æˆ‘çš„ç»éªŒã€‚&lt;/p></description></item><item><title>pwnable.tw re-alloc</title><link>https://hhdx.xyz/post/pwnable-tw-re-alloc/</link><pubDate>Fri, 07 Aug 2020 22:11:47 +0000</pubDate><guid>https://hhdx.xyz/post/pwnable-tw-re-alloc/</guid><description>&lt;h2 id="é¢˜ç›®åˆ†æ">é¢˜ç›®åˆ†æ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Arch: amd64-64-little
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RELRO: Partial RELRO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack: Canary found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NX: NX enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PIE: No PIE (0x400000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FORTIFY: Enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ˜¯ä¸€ä¸ªå…¸å‹çš„èœå•ç±»ç¨‹åº&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$$$$$$$$$$$$$$$$$$$$$$$$$$$$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ğŸŠ RE Allocator ğŸŠ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$$$$$$$$$$$$$$$$$$$$$$$$$$$$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ 1. Alloc $
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ 2. Realloc $
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ 3. Free $
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ 4. Exit $
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$$$$$$$$$$$$$$$$$$$$$$$$$$$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>Alloc: indexåªèƒ½å–0æˆ–1ï¼›sizeå¿…é¡»&amp;lt;=0x78ï¼›ç„¶åä½¿ç”¨&lt;code>realloc(0, size)&lt;/code>åˆ†é…ï¼Œé€šè¿‡æºç å¯ä»¥çœ‹å‡ºï¼Œè¿™å°±ç›¸å½“äº&lt;code>malloc(size)&lt;/code>ã€‚è¿™é‡Œå­˜åœ¨null byte overflowï¼ˆç„¶è€Œæ²¡ä»€ä¹ˆç”¨ä¼¼ä¹ï¼Œä¸€å¼€å§‹æˆ‘ä¸€ç›´å¡åœ¨è¿™é‡Œæƒ³å¦‚ä½•åˆ©ç”¨ï¼Œå®Œå…¨æ²¡æ³¨æ„åˆ°åä¸€ä¸ªæ¼æ´ã€‚ã€‚ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* realloc of null is supposed to be same as malloc */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">oldmem&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">__libc_malloc&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">bytes&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>Realloc: sizeåŒæ ·&amp;lt;=0x78ã€‚reallocæœ‰å‡ ç§æƒ…å†µï¼šè¯·æ±‚å¤§å°è‡ªå·±å¯ä»¥æ»¡è¶³ï¼›å°è¯•å‘åæ‰©å±•(top chunkæˆ–!inuse (next))ï¼›&lt;code>__int_malloc&lt;/code>è¯·æ±‚æ–°å—ã€‚ï¼ˆè¿™é‡Œå­˜åœ¨UAFï¼Œè¾“å…¥sizeä¸º0&lt;/li>
&lt;li>Freeï¼š&lt;code>realloc(ptr, 0)&lt;/code>ç›¸å½“äº&lt;code>free(ptr)&lt;/code>ï¼ŒåŒæ—¶å°†æŒ‡é’ˆæ•°ç»„ç½®ç©ºã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">bytes&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">oldmem&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">__libc_free&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">oldmem&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>libc_version: glibc 2.29 with tcacheã€‚è¯¥ç‰ˆæœ¬libcçš„&lt;a href="https://launchpad.net/ubuntu/+source/glibc/2.29-0ubuntu2">æºç &lt;/a>ã€‚ä¸‹ä¸€ç¯‡æ–‡ç« è¯´ä¸€ä¸‹å¦‚ä½•ç¡®å®šçš„libcç‰ˆæœ¬ï¼Œå¦‚ä½•ç¡®å®šçš„æœ‰tcacheï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æŒ‡å®šlibcè¿è¡Œç¨‹åºã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­å‡ºç°äº†å¯¹tcache double freeçš„ä¸€ä¸ª&lt;a href="https://hhdx.xyz/2020/08/01/How2heap%E6%80%BB%E7%BB%93/#fastbin-dup">æ£€æŸ¥æœºåˆ¶&lt;/a>ã€‚&lt;/p></description></item><item><title>glibc heap æ•´ç†</title><link>https://hhdx.xyz/post/glibcheap/</link><pubDate>Sun, 02 Aug 2020 12:51:56 +0000</pubDate><guid>https://hhdx.xyz/post/glibcheap/</guid><description>&lt;p>ç›®å‰ Linux æ ‡å‡†å‘è¡Œç‰ˆä¸­ä½¿ç”¨çš„å †åˆ†é…å™¨æ˜¯ glibc ä¸­çš„å †åˆ†é…å™¨ï¼šptmalloc2ã€‚ptmalloc2 ä¸»è¦æ˜¯é€šè¿‡ malloc/free å‡½æ•°æ¥åˆ†é…å’Œé‡Šæ”¾å†…å­˜å—ã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å†…å­˜åˆ†é…ä¸ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼ŒLinux æœ‰è¿™æ ·çš„ä¸€ä¸ªåŸºæœ¬å†…å­˜ç®¡ç†æ€æƒ³ï¼Œ&lt;strong>åªæœ‰å½“çœŸæ­£è®¿é—®ä¸€ä¸ªåœ°å€çš„æ—¶å€™ï¼Œç³»ç»Ÿæ‰ä¼šå»ºç«‹è™šæ‹Ÿé¡µé¢ä¸ç‰©ç†é¡µé¢çš„æ˜ å°„å…³ç³»&lt;/strong>ã€‚&lt;/p>
&lt;h2 id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ&lt;/h2>
&lt;h3 id="malloc">malloc&lt;/h3>
&lt;p>&lt;code>malloc(size_t n)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>å½“ n=0 æ—¶ï¼Œè¿”å›å½“å‰ç³»ç»Ÿå…è®¸çš„å †çš„æœ€å°å†…å­˜å—ã€‚&lt;/li>
&lt;li>å½“ n ä¸ºè´Ÿæ•°æ—¶ï¼Œç”±äºåœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œ&lt;strong>size_t æ˜¯æ— ç¬¦å·æ•°ï¼ˆè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼‰&lt;/strong>ï¼Œæ‰€ä»¥ç¨‹åºå°±ä¼šç”³è¯·å¾ˆå¤§çš„å†…å­˜ç©ºé—´ï¼Œä½†é€šå¸¸æ¥è¯´éƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‚£ä¹ˆå¤šçš„å†…å­˜å¯ä»¥åˆ†é…ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="free">free&lt;/h3>
&lt;p>&lt;code>free(void *p)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å½“ p ä¸ºç©ºæŒ‡é’ˆæ—¶ï¼Œå‡½æ•°ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚&lt;/strong>&lt;/li>
&lt;li>å½“ p å·²ç»è¢«é‡Šæ”¾ä¹‹åï¼Œå†æ¬¡é‡Šæ”¾ä¼šå‡ºç°ä¹±ä¸ƒå…«ç³Ÿçš„æ•ˆæœï¼Œè¿™å…¶å®å°±æ˜¯ &lt;code>double free&lt;/code>ã€‚&lt;/li>
&lt;li>é™¤äº†è¢«ç¦ç”¨ (mallopt) çš„æƒ…å†µä¸‹ï¼Œå½“é‡Šæ”¾å¾ˆå¤§çš„å†…å­˜ç©ºé—´æ—¶ï¼Œç¨‹åºä¼šå°†è¿™äº›å†…å­˜ç©ºé—´è¿˜ç»™ç³»ç»Ÿï¼Œä»¥ä¾¿äºå‡å°ç¨‹åºæ‰€ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="èƒŒåçš„ç³»ç»Ÿè°ƒç”¨">èƒŒåçš„ç³»ç»Ÿè°ƒç”¨&lt;/h2>
&lt;p>è¿™äº›å‡½æ•°èƒŒåçš„ç³»ç»Ÿè°ƒç”¨ä¸»è¦æ˜¯ &lt;a href="http://man7.org/linux/man-pages/man2/sbrk.2.html">(s)brk&lt;/a> å‡½æ•°ä»¥åŠ &lt;a href="http://man7.org/linux/man-pages/man2/mmap.2.html">mmap, munmap&lt;/a> å‡½æ•°ã€‚&lt;/p></description></item><item><title>How2heapæ€»ç»“</title><link>https://hhdx.xyz/post/how2heap%E6%80%BB%E7%BB%93/</link><pubDate>Sat, 01 Aug 2020 19:36:10 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap%E6%80%BB%E7%BB%93/</guid><description>&lt;h2 id="first-fit">first-fit&lt;/h2>
&lt;p>å¦‚æœä¸€ä¸ªchunkå¯ç”¨ä¸”è¶³å¤Ÿå¤§ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨è¿™ä¸ªchunkã€‚&lt;/p>
&lt;h2 id="calc_tcache_idx">calc_tcache_idx&lt;/h2>
&lt;p>tcache(thread local caching)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* We want 64 entries. This is an arbitrary limit, which tunables can reduce. */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp"># define TCACHE_MAX_BINS 64
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp"># define MAX_TCACHE_SIZE tidx2usize (TCACHE_MAX_BINS-1)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* Only used to pre-fill the tunables. */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp"># define tidx2usize(idx) (((size_t) idx) * MALLOC_ALIGNMENT + MINSIZE - SIZE_SZ)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* When &amp;#34;x&amp;#34; is from chunksize(). */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp"># define csize2tidx(x) (((x) - MINSIZE + MALLOC_ALIGNMENT - 1) / MALLOC_ALIGNMENT)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="cm">/* When &amp;#34;x&amp;#34; is a user-provided size. */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp"># define usize2tidx(x) csize2tidx (request2size (x))
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* With rounding and alignment, the bins are...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> idx 0 bytes 0..24 (64-bit) or 0..12 (32-bit)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> idx 1 bytes 25..40 or 13..20
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> idx 2 bytes 41..56 or 21..28
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> etc. */&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>tcacheæ‹¥æœ‰å’Œfastbinå·®ä¸å¤šçš„ç»“æ„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ64ä¸ªbinï¼Œæ¯ä¸ªbinæœ€å¤š7ä¸ªchunk&lt;/p>
&lt;p>64bit: &lt;code>IDX = (CHUNKSIZE - 0x11) / 0x10&lt;/code>&lt;/p></description></item><item><title>How2heap--tcache_stashing_unlink_attack Hitcon2019--one_punch</title><link>https://hhdx.xyz/post/how2heap-tcache-stashing-unlink-attack-hitcon2019-one-punch/</link><pubDate>Fri, 31 Jul 2020 21:40:45 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-tcache-stashing-unlink-attack-hitcon2019-one-punch/</guid><description>&lt;h2 id="tcache-stashing-unlink-attack">tcache stashing unlink attack&lt;/h2>
&lt;p>åœ¨tcacheä¸­å¸ƒç½®5ä¸ªchunkï¼Œå¯¹åº”å¤§å°çš„small binä¸­å¸ƒç½®2ä¸ªchunkã€‚ä¿®æ”¹å€’æ•°ç¬¬äºŒä¸ªsmall chunkçš„bkæŒ‡å‘targetï¼Œtarget-&amp;gt;bkå†™å…¥ä¸€ä¸ªå¯å†™çš„ä½ç½®ã€‚ä½¿ç”¨callocè§¦å‘ï¼Œå› ä¸ºcallocè°ƒç”¨&lt;code>_int_malloc&lt;/code>ä¸ä¼šä½¿ç”¨tcacheè¿›è¡Œåˆ†é…ï¼ˆé™¤äº†&lt;code>_int_malloc&lt;/code>éå†unsorted binçš„å°¾éƒ¨ï¼‰ï¼Œåªä¼šå¾€tcacheä¸­å¡«å……ã€‚&lt;/p>
&lt;p>å¯ä»¥é€ æˆtarget-&amp;gt;bk-&amp;gt;fdä½ç½®å†™å…¥å¤§æ•°å­—ï¼Œå¹¶ä¸”targetæˆä¸ºtcacheä¸­ç¬¬ä¸€ä¸ªï¼Œå†æ¬¡mallocå°±å¯ä»¥è·å¾—ã€‚&lt;/p>
&lt;p>æœ‰ç‚¹åƒfastbin reverse into tcacheã€‚&lt;/p>
&lt;h3 id="variation">variation&lt;/h3>
&lt;p>åœ¨tcacheä¸­å¸ƒç½®6ä¸ªchunkï¼Œå¯¹åº”å¤§å°çš„small binä¸­å¸ƒç½®2ä¸ªchunkã€‚ï¼ˆå¯ä»¥ç”¨unsorted binåˆ‡å‰²çš„æ–¹å¼å¸ƒç½®2ä¸ªsmall binï¼‰&lt;/p>
&lt;p>ä¿®æ”¹å€’æ•°ç¬¬äºŒä¸ªsmall chunkçš„bkï¼Œcallocè§¦å‘ï¼Œåªåœ¨bk-&amp;gt;fdå†™å…¥å¤§æ•°å­—ã€‚&lt;/p></description></item><item><title>How2heap--house_of_orange Hitcon2016--houseoforange</title><link>https://hhdx.xyz/post/how2heap-house-of-orange-hitcon2016-houseoforange/</link><pubDate>Sat, 25 Jul 2020 18:14:07 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-house-of-orange-hitcon2016-houseoforange/</guid><description>&lt;h2 id="house-of-orange">house of orange&lt;/h2>
&lt;p>ä¿®æ”¹&lt;code>topchunk-&amp;gt;size&lt;/code>ä¸ºä¸€ä¸ªç¼©å°çš„å¹¶ä¸”æ»¡è¶³é¡µå¯¹é½çš„å¤§å°ï¼Œmallocä¸€ä¸ªå¤§äºsizeçš„å—ï¼ˆä½†ä¹Ÿä¸è¦å¤§äºmmap thresholdï¼‰ï¼Œä¼šå¯¼è‡´åŸæ¥topchunkè¢«æ”¾å…¥unsorted binã€‚&lt;/p>
&lt;p>å½“topchunkä¸è¶³ä»¥åˆ†é…æ‰€éœ€ç©ºé—´æ—¶ï¼Œä¼šè°ƒç”¨sysmallocåˆ†é…é¢å¤–ç©ºé—´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œmain_arenaä¸­old top chunkå’Œæ–°åˆ†é…çš„top chunké¦–å°¾ç›¸é‚»ï¼Œä»è€Œä¼šè¿›è¡Œåˆå¹¶ã€‚å½“æˆ‘ä»¬å°†&lt;code>topchunk-&amp;gt;size&lt;/code>å‡å°åï¼Œä¼šæ£€æµ‹ä¸åˆ°ç›¸é‚»ï¼Œä¹Ÿå°±ä¸ä¼šåˆå¹¶äº†ã€‚è®¾ç½®å¥½fencepost chunkï¼Œä¼šæ‰§è¡Œ&lt;code>_int_free (av, old_top, 1)&lt;/code>å°†å…¶æ”¾å…¥unsorted binã€‚&lt;/p>
&lt;p>ä»£ç æ¶‰åŠ&lt;code>_int_malloc&lt;/code>åè¾¹å’Œ&lt;code>sysmalloc&lt;/code>ã€‚&lt;/p></description></item><item><title>How2heap--house_of_einherjar SECON2016--tinypad</title><link>https://hhdx.xyz/post/how2heap-house-of-einherjar-secon2016-tinypad/</link><pubDate>Thu, 23 Jul 2020 09:57:08 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-house-of-einherjar-secon2016-tinypad/</guid><description>&lt;h2 id="house-of-einherjar">house of einherjar&lt;/h2>
&lt;p>å’Œhouse of forceå¾ˆåƒï¼Œéƒ½æ˜¯ç¯¡æ”¹top chunkã€‚&lt;/p>
&lt;p>off-by-oneè¦†ç›–victim chunkçš„&lt;code>pre_in_use&lt;/code>ä½ï¼Œå¹¶ä¿®æ”¹&lt;code>victim-&amp;gt;pre_size&lt;/code>ä¸ºè·ç¦»ç›®æ ‡åœ°å€çš„å¤§å°ï¼Œåœ¨ç›®æ ‡åœ°å€å¤„ä¼ªé€ chunkï¼Œé‡Šæ”¾victimæ—¶ï¼Œå‘ç”Ÿbackward consolidateï¼Œåˆå¹¶åˆ°ç›®æ ‡åœ°å€ã€‚&lt;/p>
&lt;p>&lt;strong>victiméœ€è¦ä¸´è¿‘top chunk&lt;/strong>ï¼Œbackward consolidateç»“æŸï¼Œæ¥ç€ä¸top chunkè¿›è¡Œforward consolidateã€‚å¦‚æœä¸è¿™æ ·ï¼Œè¿™ä¸ªå—è¢«æ”¾å…¥unsorted binï¼Œè€Œåœ¨unsorted binä¸­åˆ†é…ä¼šè¿‡ä¸äº†ä»¥ä¸‹æ£€æŸ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">__builtin_expect&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">chunksize_nomask&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">victim&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">SIZE_SZ&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">||&lt;/span> &lt;span class="nf">__builtin_expect&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">chunksize_nomask&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">victim&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">av&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">system_mem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">malloc_printerr&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;malloc(): memory corruption&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>How2heap--large_bin_attack 0ctf2018--heapstorm2</title><link>https://hhdx.xyz/post/how2heap-large-bin-attack-0ctf2018-heapstorm2/</link><pubDate>Sat, 18 Jul 2020 21:10:54 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-large-bin-attack-0ctf2018-heapstorm2/</guid><description>&lt;h2 id="large-bin-attack">large bin attack&lt;/h2>
&lt;p>å¯¹å·²å­˜åœ¨äºlarge binä¸­çš„chunkçš„bkã€bk_nextsizeå­—æ®µè¿›è¡Œæ›´æ”¹ï¼Œåœ¨unsorted binä¸­å–å‡ºæ’å…¥è¯¥large binæ—¶ï¼Œä¼šå°†bk-&amp;gt;fdã€bk_nextsize-&amp;gt;fd_nextsizeçš„ä½ç½®è¦†ç›–æˆchunkçš„åœ°å€ã€‚æ¶‰åŠçš„ä»£ç å°±æ˜¯unsorted binéå†å–å‡ºæ’å…¥é‚£å—ã€‚å’Œå…ˆå‰çš„unsorted bin attackç±»ä¼¼ï¼Œé€šå¸¸ä¸ºè¿›ä¸€æ­¥æ”»å‡»åšå‡†å¤‡ï¼Œå¦‚ä¿®æ”¹global_max_fastã€‚&lt;/p>
&lt;p>è¿™é‡Œæ¯”è¾ƒéš¾ç†è§£å°±æ˜¯large binçš„ç»“æ„ï¼Œç‰¹åˆ«æ˜¯å…ˆå‰æˆ‘è¢«ä¸€ä¸ª&lt;a href="https://raw.githubusercontent.com/clxsh/pics/master/img/largebin.png">large binç»“æ„å›¾&lt;/a>æ‰€è¯¯å¯¼ï¼Œä¸‹é¢ç»™å‡ºæˆ‘ç”»çš„ç»“æ„å›¾ï¼ˆå¦‚æœæœ‰é”™è¯¯o((âŠ™ï¹âŠ™))oï¼Œè¯·å¸®å¿™æŒ‡å‡ºï¼‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/clxsh/pics/master/img/large_bin2.png" alt="glibc large bin">&lt;/p>
&lt;h2 id="0ctf2018-heapstorm2">0ctf2018 heapstorm2&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Arch: amd64-64-little
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RELRO: Full RELRO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack: Canary found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NX: NX enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PIE: PIE enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åŠŸèƒ½åˆ†æ">åŠŸèƒ½åˆ†æ&lt;/h3>
&lt;p>ç¨‹åºé¦–å…ˆä½¿ç”¨malloptå‡½æ•°å°†global_max_fastè®¾ç½®ä¸º0ï¼Œä¹Ÿå°±æ˜¯ä¸ä½¿ç”¨fastbinã€‚&lt;/p></description></item><item><title>How2heap--unsorted_bin_attack 0ctf2016--zerostorage</title><link>https://hhdx.xyz/post/how2heap-unsorted-bin-attack-0ctf2016-zerostorage/</link><pubDate>Sun, 12 Jul 2020 10:01:35 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-unsorted-bin-attack-0ctf2016-zerostorage/</guid><description>&lt;h2 id="unsorted-bin-attack">unsorted bin attack&lt;/h2>
&lt;p>å¯¹unsorted binä¸­çš„&lt;code>chunk-&amp;gt;bk&lt;/code>è¿›è¡Œä¿®æ”¹ï¼Œæ¥ä¸‹æ¥è¯¥chunkåˆ†é…å‡ºå»æ—¶ï¼Œ&lt;code>chunk-&amp;gt;bk-&amp;gt;fd&lt;/code>å°±è¢«èµ‹å€¼ä¸ºunsortedbinå¤´ç»“ç‚¹åœ°å€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="n">bck&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">victim&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">bk&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* remove from unsorted list */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">unsorted_chunks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">av&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">bk&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">bck&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bck&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">fd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">unsorted_chunks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">av&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨glibc2.28ä¸­å¢åŠ äº†ä»¥ä¸‹æ£€æŸ¥ï¼Œä½¿å¾—æ­¤æ”»å‡»å¤±æ•ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">__glibc_unlikely&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">bck&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">fd&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">victim&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">malloc_printerr&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;malloc(): corrupted unsorted chunks 3&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>unsorted bin attacké€šå¸¸ä¸ºè¿›ä¸€æ­¥çš„æ”»å‡»åšå‡†å¤‡ï¼Œæ¯”å¦‚è¦†å†™global_max_fastã€‚&lt;/p>
&lt;h2 id="0ctf2016-zerostorage">0ctf2016 zerostorage&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Arch: amd64-64-little
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RELRO: Full RELRO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack: Canary found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NX: NX enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PIE: PIE enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FORTIFY: Enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…³é”®æ•°æ®ç»“æ„&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/clxsh/pics/master/img/image-20200712102723178.png" alt="image-20200712102723178">&lt;/p>
&lt;p>flagï¼šæ ‡è¯†è¯¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨&lt;/p>
&lt;p>sizeï¼šè®°å½•å¤§å°&lt;/p>
&lt;p>contentï¼šæ•°æ®å—æŒ‡é’ˆ&lt;/p>
&lt;p>ç¨‹åºæœ‰ä»¥ä¸‹åŠŸèƒ½&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1. Insert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. Merge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. Delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. View
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6. List
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7. Exit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>insertï¼šè·å–æ•°æ®å—å¤§å°ï¼Œå¹¶è¯»å…¥æ•°æ®ã€‚æ•°æ®å—å¤§å°åœ¨128~4096è¿™ä¸ªèŒƒå›´å†…&lt;/p>
&lt;p>updateï¼šå¯¹æ•°æ®å—è¿›è¡Œå¤§å°å†…å®¹è¿›è¡Œæ›´æ–°&lt;/p>
&lt;p>mergeï¼šå°†ä¸¤èŠ‚ç‚¹åˆå¹¶ã€‚è¿™é‡Œå­˜åœ¨æ¼æ´ï¼Œè¾“å…¥ä¸¤æ¬¡ç›¸åŒçš„idï¼Œå¯¼è‡´UAFã€‚è¿™ä¸ªæ¼æ´æˆ‘æ²¡å‘ç°ï¼Œæ€ç»´è¿˜ä¸å¤ŸçŒ¥çå•Š&lt;/p>
&lt;p>deleteï¼šé‡Šæ”¾æ•°æ®å—ï¼Œæ¸…ç©ºèŠ‚ç‚¹&lt;/p>
&lt;h3 id="æ€»ä½“æ€è·¯">æ€»ä½“æ€è·¯&lt;/h3>
&lt;p>é€šè¿‡UAFï¼Œé¦–å…ˆæ³„éœ²libcåŸºå€ï¼Œç„¶åä¿®æ”¹å…¶bkæŒ‡é’ˆï¼Œä½¿ç”¨unsorted bin attackä¿®æ”¹global_max_fastå˜é‡ï¼›fastbin bin attackè¦†å†™&lt;code>__free_hook&lt;/code>ä¸ºsystemå‡½æ•°åœ°å€ã€‚&lt;/p></description></item><item><title>How2heap--house_of_force Bctf2016--bcloud</title><link>https://hhdx.xyz/post/how2heap-house-of-force-bctf2016-bcloud/</link><pubDate>Tue, 07 Jul 2020 14:46:39 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-house-of-force-bctf2016-bcloud/</guid><description>&lt;h2 id="house-of-force">House of force&lt;/h2>
&lt;p>æº¢å‡ºä¿®æ”¹topchunkçš„sizeï¼Œåˆ†é…ä¸€ä¸ªä½¿size_tæº¢å‡ºçš„evil_sizeï¼Œä½¿ä¸‹ä¸€æ¬¡åˆ†é…åœ¨ç›®æ ‡ä½ç½®ï¼Œè¿›è¡Œä¿®æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* The evil_size is calulcated as (nb is the number of bytes requested + space for metadata):
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* new_top = old_top + nb
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* nb = new_top - old_top
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* req + 2sizeof(long) = new_top - old_top
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* req = new_top - old_top - 2sizeof(long)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* req = dest - 2sizeof(long) - old_top - 2sizeof(long)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">* req = dest - old_top - 4*sizeof(long)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bctf2016-bcloud">Bctf2016 bcloud&lt;/h2>
&lt;h3 id="åˆ†æ">åˆ†æ&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Arch: i386-32-little
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RELRO: Partial RELRO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack: Canary found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NX: NX enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PIE: No PIE (0x8047000)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¨‹åºä¸€å¼€å§‹è®©è¾“å…¥nameã€orgã€hostnameï¼Œè¾“å…¥å­—ç¬¦ä¸²å‡½æ•°å­˜åœ¨null byte overflowã€‚&lt;/p>
&lt;p>è¾“å…¥nameå‡½æ•°ä¸­ï¼Œå­—ç¬¦ä¸²æ•°ç»„åœ¨æ ˆä¸­åéƒ¨ç´§é‚»æŒ‡é’ˆå˜é‡ï¼Œæ‰€ä»¥strcpyä¼šå°†è¯¥æŒ‡é’ˆä¸€å¹¶æ‹·è´å…¥0x40çš„ç©ºé—´ï¼ˆå®é™…å¯ç”¨0x44ï¼‰ï¼Œå¹¶ä¸”null byteè¦†ç›–topchunkçš„æœ€ä½å­—èŠ‚ã€‚å¯ä»¥æ³„éœ²å †çš„åœ°å€&lt;/p>
&lt;p>è¾“å…¥orgã€hostnameå‡½æ•°ä¸­ï¼Œå­˜åœ¨åŒæ ·é—®é¢˜ï¼Œå¯è¦†ç›–çš„æ›´å¤šçš„å­—èŠ‚ã€‚å¯ä»¥è¦†ç›–topchunkçš„size&lt;/p></description></item><item><title>How2heap--overlapping_chunks Hack.lu2015--bookstore</title><link>https://hhdx.xyz/post/how2heap-overlapping-chunks-hack-lu2015-bookstore/</link><pubDate>Sun, 05 Jul 2020 18:45:39 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-overlapping-chunks-hack-lu2015-bookstore/</guid><description>&lt;h2 id="overlapping-chunks">overlapping chunks&lt;/h2>
&lt;p>æº¢å‡ºå¯¹unsortedbinä¸­çš„&lt;code>chunk-&amp;gt;size&lt;/code>è¿›è¡Œä¿®æ”¹ï¼Œé€ æˆå †å—é‡å ã€‚&lt;/p>
&lt;h2 id="hacklu2015-bookstore">hack.lu2015 bookstore&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Arch: amd64-64-little
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RELRO: No RELRO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack: Canary found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NX: NX enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PIE: No PIE (0x3ff000)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¨‹åºæ˜¯ä¸€ä¸ªè®¢ä¹¦ç³»ç»Ÿï¼Œåœ¨mainå‡½æ•°å¼€å§‹å¤„ï¼Œè¿ç»­åˆ†é…3ä¸ª0x80çš„ç©ºé—´ï¼Œä¸€ä¸ªå­˜å‚¨è®¢å•1â€”â€”order1ï¼Œä¸€ä¸ªå­˜å‚¨è®¢å•2â€”â€”order2ï¼Œä¸€ä¸ªå­˜å‚¨æç¤ºä¿¡æ¯â€”â€”infoã€‚æœ‰ä»¥ä¸‹åŠŸèƒ½èœå•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1: Edit order 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2: Edit order 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3: Delete order 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4: Delete order 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5: Submit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Edit order 1/2ï¼šorder1/order2ä½¿ç”¨fgetcè¯»å–å­—ç¬¦ä¸²ï¼Œè¯»åˆ°&lt;code>\n&lt;/code>ç»ˆæ­¢ï¼Œæ‰€ä»¥è¿™é‡Œå­˜åœ¨æº¢å‡º&lt;/p>
&lt;p>Delete order 1/2ï¼šfreeæ‰order1/order2ã€‚è¿™é‡Œå­˜åœ¨æŒ‡é’ˆæ‚¬ç©º&lt;/p>
&lt;p>Submitï¼š åˆ†é…0x140çš„ç©ºé—´ï¼ˆç§°ä¸ºorderlistï¼‰å°†order1å’Œorder2æ‹¼æ¥ã€‚è¿™é‡Œå­˜åœ¨æº¢å‡º&lt;/p>
&lt;p>ç¨‹åºæœ«å°¾&lt;code>printf(info)&lt;/code>å­˜åœ¨å¯èƒ½çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ã€‚&lt;/p>
&lt;h3 id="overlapping-chunks--format-string-vulnerability">overlapping chunks &amp;amp;&amp;amp; format string vulnerability&lt;/h3></description></item><item><title>How2heap--poison_null_byte Plaidctf2015--plaiddb</title><link>https://hhdx.xyz/post/how2heap-poison-null-byte-plaidctf2015-plaiddb/</link><pubDate>Fri, 03 Jul 2020 00:16:56 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-poison-null-byte-plaidctf2015-plaiddb/</guid><description>&lt;h2 id="poison-null-byte">Poison null byte&lt;/h2>
&lt;p>å…³äºå †å—é‡å ï¼Œå¯ä»¥çœ‹è¿™ç¯‡&lt;a href="https://4ngelboy.blogspot.com/2016/10/span-display-block-overflow-hidden_10.html">æ–‡ç« &lt;/a>ï¼Œå›¾æ–‡å¹¶èŒ‚ã€‚&lt;/p>
&lt;p>glibc2.26ä¸­ï¼Œåœ¨unlinkå®ä¸­åŠ å…¥äº†&lt;code>size==prev_size(next_chunk)&lt;/code>çš„æ£€æŸ¥ï¼Œä¸ä¸‹ä¸€chunkæ‰€å­˜å‚¨çš„pre_sizeè¿›è¡Œäº†æ¯”å¯¹ï¼Œåœ¨&lt;code>poison_null_byte.c&lt;/code>ä¸­ç›¸åº”çš„æ·»åŠ äº†&lt;code>*(size_t*)(b+0x1f0) = 0x200&lt;/code>ï¼Œå¯ä»¥ç»•è¿‡è¿™ä¸ªæ£€æŸ¥ï¼Œæ‰€ä»¥how2heapçš„READMEä¸­å¯¹glibcçš„è¦æ±‚æ˜¯&lt;code>&amp;lt;2.26&lt;/code>åº”è¯¥æ˜¯å¿˜äº†æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">chunk b +------&amp;gt; +----------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------+ &amp;lt;---------+ size
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | 0X200 |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------+ &amp;lt;---------+ b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------+ &amp;lt;--------+ fake pre_size
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | 0X200 |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chunk c +------&amp;gt; +----------+ &amp;lt;--------+ pre_size
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | 0X210 |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +----------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>è§¦å‘unlinkçš„æµç¨‹&lt;/strong>ï¼šé€šè¿‡null byteæº¢å‡ºä¼ªé€ å®Œ0x200çš„chunkåï¼Œæ­¤æ—¶è¯¥chunkå­˜åœ¨äºunsortedbinã€‚å†æ¬¡åˆ†é…0x100çš„b1æ—¶ï¼Œéå†unsortedbinï¼Œè¯¥chunkè¢«æ”¾å…¥åˆ°smallbinä¸­ï¼Œunsortedbiné‡Œçš„chunkä¹Ÿå°±è¿™ä¸€ä¸ªï¼Œéå†ç»“æŸæ— æ³•åˆ†é…ã€‚åˆé€šè¿‡æŸ¥æ‰¾binmapæ‰¾åˆ°0x200çš„smallbinï¼Œè¿™æ—¶è§¦å‘çš„unlinkï¼Œå°†è¯¥chunkä»smallbinä¸­å–å‡ºã€‚&lt;/p></description></item><item><title>how2heap--House_of_Spirit Hack.lu2014--oreo</title><link>https://hhdx.xyz/post/how2heap-house-of-spirit-hacklu2014-oreo/</link><pubDate>Wed, 01 Jul 2020 14:13:34 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-house-of-spirit-hacklu2014-oreo/</guid><description>&lt;h2 id="house-of-spirit">House of Spirit&lt;/h2>
&lt;p>è¯¥æ”»å‡»æ‰‹æ³•çš„ä¸»è¦æ˜¯æ€æƒ³æ˜¯ï¼Œåœ¨ä¸å¯æ§åŒºåŸŸçš„å‰åä¼ªé€ chunkä¿¡æ¯ï¼Œè¦†ç›–æŸæŒ‡é’ˆæŒ‡å‘&lt;code>chunk2mem(fake_chunk)&lt;/code>ï¼Œé‡Šæ”¾è¯¥æŒ‡é’ˆåå†æ¬¡ç”³è¯·ï¼Œå¯¹ä¸å¯æ§åŒºåŸŸçš„è¿›è¡Œæ”¹å†™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">+---------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| å¯ æ§ åŒº åŸŸ |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| ä¸ å¯ æ§ åŒº åŸŸ |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| ä¸€ èˆ¬ ä¸º æŸ äº› |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| æŒ‡ é’ˆ |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| å¯ æ§ åŒº åŸŸ |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¼ªé€ çš„chunkä¹Ÿé€šå¸¸æ˜¯fastbinï¼Œå› ä¸ºæ£€æŸ¥å®¹æ˜“ç»•è¿‡ã€‚&lt;/p></description></item><item><title>How2heap--fastbin_dup_consolidate Hitcon2016--SleepyHolder</title><link>https://hhdx.xyz/post/how2heap-fastbin-dup-consolidate-hitcon2016-sleepyholder/</link><pubDate>Sun, 28 Jun 2020 23:01:43 +0000</pubDate><guid>https://hhdx.xyz/post/how2heap-fastbin-dup-consolidate-hitcon2016-sleepyholder/</guid><description>&lt;h2 id="å‰ç½®">å‰ç½®&lt;/h2>
&lt;p>Ubuntu 16.04&lt;/p>
&lt;p>ä½¿ç”¨how2heapè„šæœ¬ç¼–è¯‘glibc2.25ï¼Œå…¶ä¸­çš„4æ˜¯ç¼–è¯‘çº¿ç¨‹æ•°ã€‚è„šæœ¬ä¸­&lt;code>git clone&lt;/code>æ…¢ï¼Œå¯ä»¥æ›¿æ¢æˆ&lt;a href="https://mirrors.tuna.tsinghua.edu.cn/">tsinghua mirrors&lt;/a>ï¼ŒæŠŠç¬¬83è¡Œçš„&lt;code>git clone git://sourceware.org/git/glibc.git &amp;quot;$SRC&amp;quot;&lt;/code> æ›¿æ¢æˆ&lt;code> git clone https://mirrors.tuna.tsinghua.edu.cn/git/glibc.git &amp;quot;$SRC&amp;quot;&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./glibc_build.sh 2.25 -j &lt;span class="m">4&lt;/span> -disable-tcache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åšè¿™é“é¢˜ç›®ä½¿ç”¨äº†glibc2.25ï¼Œ&lt;code>patchelf --set-interpreter /path/to/ld-2.25.so /path/to/exe&lt;/code>ï¼Œpatchä¹‹åå†è¿è¡Œç¨‹åºå°±è‡ªåŠ¨ä½¿ç”¨åŒç›®å½•ä¸‹libc-2.25.soã€‚&lt;/p></description></item><item><title>ucore os lab7ç¬”è®°</title><link>https://hhdx.xyz/post/ucore-os-lab7%E7%AC%94%E8%AE%B0/</link><pubDate>Tue, 24 Mar 2020 23:39:11 +0000</pubDate><guid>https://hhdx.xyz/post/ucore-os-lab7%E7%AC%94%E8%AE%B0/</guid><description>&lt;h1 id="åŒæ­¥äº’æ–¥">åŒæ­¥äº’æ–¥&lt;/h1>
&lt;h2 id="ç†è®º">ç†è®º&lt;/h2>
&lt;p>äº’æ–¥ã€æ­»é”ã€é¥¥é¥¿&lt;/p>
&lt;p>&lt;strong>äº’æ–¥&lt;/strong>æ˜¯æŒ‡æŸä¸€èµ„æºåŒæ—¶åªå…è®¸ä¸€ä¸ªè¿›ç¨‹å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œå…·æœ‰å”¯ä¸€æ€§å’Œæ’å®ƒæ€§ï¼Œä½†äº’æ–¥ä¸ç”¨é™åˆ¶è¿›ç¨‹å¯¹èµ„æºçš„è®¿é—®é¡ºåºï¼Œå³è®¿é—®å¯ä»¥æ˜¯æ— åºçš„ã€‚&lt;/p>
&lt;p>&lt;strong>åŒæ­¥&lt;/strong>æ˜¯æŒ‡åœ¨è¿›ç¨‹é—´çš„æ‰§è¡Œå¿…é¡»ä¸¥æ ¼æŒ‰ç…§è§„å®šçš„æŸç§å…ˆåæ¬¡åºæ¥è¿è¡Œï¼Œå³è®¿é—®æ˜¯æœ‰åºçš„ï¼Œè¿™ç§å…ˆåæ¬¡åºå–å†³äºè¦ç³»ç»Ÿå®Œæˆçš„ä»»åŠ¡éœ€æ±‚ã€‚&lt;/p>
&lt;h3 id="17-ä¸´ç•ŒåŒº">17 ä¸´ç•ŒåŒº&lt;/h3>
&lt;p>ç©ºé—²åˆ™å…¥ã€å¿™åˆ™ç­‰å¾…ã€æœ‰é™ç­‰å¾…ã€è®©æƒç­‰å¾…ï¼ˆå¯é€‰ï¼‰&lt;/p>
&lt;p>&lt;strong>å®ç°çš„ä¸‰ç§åŠæ³•&lt;/strong>ï¼šç¦ç”¨ä¸­æ–­ã€è½¯ä»¶æ–¹æ³•ã€æ›´é«˜çº§çš„æŠ½è±¡æ–¹æ³•&lt;/p>
&lt;p>æ–¹æ³•æ¯”è¾ƒä¸»è¦è€ƒè™‘æ€§èƒ½ï¼šå¹¶å‘çº§åˆ«&lt;/p>
&lt;h4 id="ç¦ç”¨ä¸­æ–­">ç¦ç”¨ä¸­æ–­&lt;/h4></description></item><item><title>ucore os lab4ç¬”è®°</title><link>https://hhdx.xyz/post/ucore-os-lab4%E7%AC%94%E8%AE%B0/</link><pubDate>Tue, 17 Mar 2020 23:14:13 +0000</pubDate><guid>https://hhdx.xyz/post/ucore-os-lab4%E7%AC%94%E8%AE%B0/</guid><description>&lt;h1 id="å†…æ ¸çº¿ç¨‹ç®¡ç†">å†…æ ¸çº¿ç¨‹ç®¡ç†&lt;/h1>
&lt;h2 id="å®éªŒæ‰§è¡Œæµç¨‹ç»¼è¿°">å®éªŒæ‰§è¡Œæµç¨‹ç»¼è¿°&lt;/h2>
&lt;p>å†…æ ¸çº¿ç¨‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿›ç¨‹ï¼Œå†…æ ¸çº¿ç¨‹ä¸ç”¨æˆ·è¿›ç¨‹çš„åŒºåˆ«æœ‰ä¸¤ä¸ªï¼š&lt;/p>
&lt;ul>
&lt;li>å†…æ ¸çº¿ç¨‹åªè¿è¡Œåœ¨å†…æ ¸æ€è€Œç”¨æˆ·è¿›ç¨‹ä¼šåœ¨åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€äº¤æ›¿è¿è¡Œï¼›&lt;/li>
&lt;li>æ‰€æœ‰å†…æ ¸çº¿ç¨‹ç›´æ¥ä½¿ç”¨å…±åŒçš„ucoreå†…æ ¸å†…å­˜ç©ºé—´ï¼Œä¸éœ€ä¸ºæ¯ä¸ªå†…æ ¸çº¿ç¨‹ç»´æŠ¤å•ç‹¬çš„å†…å­˜ç©ºé—´è€Œç”¨æˆ·è¿›ç¨‹éœ€è¦ç»´æŠ¤å„è‡ªçš„ç”¨æˆ·å†…å­˜ç©ºé—´ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="è¿›ç¨‹çš„å±æ€§ä¸ç‰¹å¾è§£æ">è¿›ç¨‹çš„å±æ€§ä¸ç‰¹å¾è§£æ&lt;/h2></description></item><item><title>äºŒçº§æŒ‡é’ˆä¸äºŒç»´æ•°ç»„ï¼Œæ•°ç»„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„</title><link>https://hhdx.xyz/post/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E4%B8%8E%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84/</link><pubDate>Tue, 05 Feb 2019 13:11:59 +0000</pubDate><guid>https://hhdx.xyz/post/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E4%B8%8E%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84/</guid><description>&lt;p>æ˜¨å¤©å†™ä¸€ä¸ªç¨‹åºçš„æ—¶å€™ç›´æ¥å°†äºŒçº§æŒ‡é’ˆæŒ‡å‘äºŒç»´æ•°ç»„ï¼Œå‘ç”Ÿæ®µé”™è¯¯ï¼Œå‘ç°äº†è‡ªå·±çš„ä¸€ä¸ªè®¤è¯†è¯¯åŒºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="o">**&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">p&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]);&lt;/span> &lt;span class="c1">//è®¿é—®å¼•èµ·æ®µé”™è¯¯
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>CSAPP3e:Attacklab</title><link>https://hhdx.xyz/post/csapp3e-attacklab/</link><pubDate>Thu, 22 Mar 2018 21:20:38 +0000</pubDate><guid>https://hhdx.xyz/post/csapp3e-attacklab/</guid><description>&lt;h2 id="ç®€ä»‹">ç®€ä»‹&lt;/h2>
&lt;p>è¿™æ˜¯CSAPPè¿™æœ¬ä¹¦çš„ç¬¬ä¸‰ä¸ªå®éªŒï¼Œå®éªŒæ‰€éœ€è¦çš„ææ–™åœ¨ &lt;a href="http://csapp.cs.cmu.edu/3e/labs.html">CSAPP3e&lt;/a>ã€‚&lt;/p>
&lt;p>è¿™ä¸ªå®éªŒåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ä»£ç æ³¨å…¥å®éªŒï¼Œä¸»è¦æ˜¯é€šè¿‡Gets()å‡½æ•°çš„å †æ ˆæº¢å‡ºä¼ å…¥æŒ‡ä»¤ï¼Œç„¶åè·³è½¬åˆ°æŒ‡å®šä½ç½®æ‰§è¡Œçš„æ–¹å¼æ¥å®ç°æ‰§è¡ŒæŒ‡å®šæŒ‡ä»¤ï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯ROPå®éªŒï¼Œå› ä¸ºè¿™é‡Œé‡‡ç”¨æ ˆéšæœºåŒ–å’Œå †æ ˆä¸å¯æ‰§è¡Œæ‰€ä»¥ä»£ç æ³¨å…¥å¤±æ•ˆäº†ã€‚ROPåˆ©ç”¨æˆªå–å·²çŸ¥æŸæŒ‡ä»¤åºåˆ—æ¥åˆ›å»ºç›®çš„æŒ‡ä»¤çš„æ–¹æ³•æ¥å®ç°çš„ï¼Œå…¶ä¸­åœ¨å®éªŒä¸­å¯åˆ©ç”¨çš„æŒ‡ä»¤åºåˆ—é™åˆ¶ä¸ºfarm.cç”Ÿæˆçš„éƒ¨åˆ†ï¼Œé€šè¿‡Gets()å‡½æ•°çš„å †æ ˆæº¢å‡ºä¼ å…¥ä¸€ç³»åˆ—æŒ‡ä»¤åœ°å€å’Œæ•°æ®å®ç°ã€‚&lt;/p>
&lt;h2 id="code-injection-attacks">Code injection attacks&lt;/h2>
&lt;h3 id="phase-1">Phase 1&lt;/h3>
&lt;p>å®éªŒç›®çš„æ˜¯test()å‡½æ•°è°ƒç”¨getbuf()åæ‰§è¡Œtouch1()å‡½æ•°è€Œä¸è¿”å›test()ï¼Œæ‰€ä»¥è¿™é‡Œç”¨touch1()çš„åœ°å€è¦†ç›–æ‰test()çš„åœ°å€å°±å¯ä»¥ã€‚getbuf()é‡Œé¢åˆ†é…äº†0x28ä¸ªå­—èŠ‚æ ˆç©ºé—´ï¼Œæ‰€ä»¥è¿™é‡ŒæŠŠæ ˆé¡¶çš„0x28ä¸ªå­—èŠ‚è¦†ç›–æ‰ï¼Œåœ¨æœ«å°¾æ·»åŠ touch1()çš„åœ°å€å°±å¯ä»¥äº†ã€‚éœ€è¦æ³¨æ„å­—èŠ‚é¡ºåºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">00 00 00 00 00 00 00 00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00 00 00 00 00 00 00 00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00 00 00 00 00 00 00 00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00 00 00 00 00 00 00 00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00 00 00 00 00 00 00 00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c0 17 40 00 00 00 00 00 /* 0x4017c0 å³ä¸ºtouch1()èµ·å§‹åœ°å€*/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>linux,windowså…±äº«è“ç‰™è®¾å¤‡</title><link>https://hhdx.xyz/post/linux-windows%E5%85%B1%E4%BA%AB%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87/</link><pubDate>Thu, 15 Feb 2018 19:38:27 +0000</pubDate><guid>https://hhdx.xyz/post/linux-windows%E5%85%B1%E4%BA%AB%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87/</guid><description>&lt;p>åŒä¸€ä¸ªè“ç‰™è®¾å¤‡åœ¨è£…æœ‰linuxï¼ŒwindowsåŒç³»ç»Ÿçš„ç”µè„‘ä¸Šä½¿ç”¨ï¼Œæ¯æ¬¡é‡æ–°è¿æ¥éƒ½ä¼šå‡ºç°è¿æ¥å¤±è´¥çš„é—®é¢˜ï¼Œéƒ½éœ€è¦ç§»é™¤è“ç‰™è®¾å¤‡å†æ¬¡æ·»åŠ ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯è“ç‰™è®¾å¤‡ç¬¬ä¸€æ¬¡è¿æ¥ç”µè„‘çš„è“ç‰™æ—¶ä¼šéšæœºç”Ÿæˆè¿æ¥ç§˜é’¥ï¼Œå‚¨å­˜åœ¨ç”µè„‘å’Œè“ç‰™è®¾å¤‡ä¸­ï¼Œä»¥åæ¯æ¬¡è¿æ¥éƒ½ä¼šæ ¡éªŒè¿™ä¸ªç§˜é’¥ã€‚é—®é¢˜å°±æ˜¯linuxï¼Œwindowsè“ç‰™åœ°å€ä¸€æ ·ï¼Œåœ¨linuxä¸‹è¿æ¥è¿‡è¿™ä¸ªè“ç‰™è®¾å¤‡å­˜å‚¨äº†ç§˜é’¥ï¼Œåœ¨windowsä¸‹åˆä¼šé‡æ–°è¿æ¥åˆä¼šç”Ÿæˆæ–°çš„ç§˜é’¥ï¼Œè“ç‰™è®¾å¤‡è®°å½•ä¸‹è¿™ä¸ªè“ç‰™åœ°å€çš„æ–°ç§˜é’¥ï¼Œæ‰€ä»¥äº¤æ›¿ä½¿ç”¨ä¸¤ä¸ªç³»ç»Ÿè¿æ¥è¿™ä¸ªè®¾å¤‡æ€»ä¼šä¸æˆåŠŸã€‚&lt;/p>
&lt;h4 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•ï¼š&lt;/h4>
&lt;ol>
&lt;li>æ›´æ”¹ç”µè„‘è“ç‰™è®¾å¤‡åœ°å€ä½¿ä¸¤ä¸ªç³»ç»Ÿä¸‹çš„ä¸ä¸€æ ·ï¼ˆè¿™ä¸ªæ²¡æ‰¾åˆ°æ–¹æ³•&amp;hellip;ï¼‰&lt;/li>
&lt;li>æ›´æ”¹è“ç‰™è®¾å¤‡è¿æ¥ç§˜é’¥ä½¿ä¸¤ä¸ªç³»ç»Ÿä¸‹çš„ä¸€æ ·&lt;/li>
&lt;/ol></description></item><item><title>æšä¸¾ç®—æ³•</title><link>https://hhdx.xyz/post/%E6%9E%9A%E4%B8%BE%E7%AE%97%E6%B3%95/</link><pubDate>Thu, 26 Jan 2017 15:09:17 +0000</pubDate><guid>https://hhdx.xyz/post/%E6%9E%9A%E4%B8%BE%E7%AE%97%E6%B3%95/</guid><description>&lt;p>ä¸Šäº†ä¸€å¹´åŠçš„å¤§å­¦äº†ï¼Œæ„Ÿè§‰æ°´å¹³è¿˜æ˜¯å¾ˆä½ï¼ŒäºŸå¾…æå‡ã€‚ã€‚ã€‚&lt;/p>
&lt;p>å‡æœŸé‡Œå‘ç°äº†ä¸€ä¸ªåŒ—äº¬å¤§å­¦çš„ä¸€ä¸ªmoocã€Šç¨‹åºè®¾è®¡ä¸ç®—æ³•ã€‹ï¼Œæ­£å¥½æ»¡è¶³çš„æˆ‘çš„éœ€è¦ï¼šç¼–ç¨‹èƒ½åŠ›ä½ä¸‹ï¼ŒåŸºç¡€ç®—æ³•ä¸ç†Ÿã€‚æ­£å¥½è¿™ä¸ªè¯¾æ‰åˆšåˆšå¼€å§‹ï¼Œæˆ‘å†³å®šè¦è·Ÿä¸‹å»ï¼Œæ©ä¸€å®šï¼
ä¸‹é¢ä¸¤é“é¢˜æ˜¯ç¬¬ä¸€ç« çš„ç»ƒä¹ ï¼š&lt;/p>
&lt;p>##ç‰¹æ®Šå¯†ç é”&lt;/p>
&lt;p>æ€»Time Limit: 1000ms Memory Limit: 1024kB
Description
æœ‰ä¸€ç§ç‰¹æ®Šçš„äºŒè¿›åˆ¶å¯†ç é”ï¼Œç”±nä¸ªç›¸è¿çš„æŒ‰é’®ç»„æˆï¼ˆn&amp;lt;30ï¼‰ï¼ŒæŒ‰é’®æœ‰å‡¹ å‡¸ä¸¤ç§çŠ¶æ€ï¼Œç”¨æ‰‹æŒ‰æŒ‰é’®ä¼šæ”¹å˜å…¶çŠ¶æ€ã€‚=&amp;quot;&amp;quot;
ç„¶è€Œè®©äººå¤´ç–¼çš„æ˜¯ï¼Œå½“ä½ æŒ‰ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œè·Ÿå®ƒç›¸é‚»çš„ä¸¤ä¸ªæŒ‰é’®çŠ¶æ€ä¹Ÿä¼šåè½¬ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æŒ‰çš„æ˜¯æœ€å·¦æˆ–è€…æœ€å³è¾¹çš„æŒ‰é’®ï¼Œè¯¥æŒ‰é’®åªä¼šå½±å“åˆ°è·Ÿå®ƒç›¸é‚»çš„ä¸€ä¸ªæŒ‰é’®ã€‚&lt;/p>
&lt;p>å½“å‰å¯†ç é”çŠ¶æ€å·²çŸ¥ï¼Œéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œä½ è‡³å°‘éœ€è¦æŒ‰å¤šå°‘æ¬¡æŒ‰é’®ï¼Œæ‰èƒ½å°†å¯†ç é”è½¬å˜ä¸ºæ‰€æœŸæœ›çš„ç›®æ ‡çŠ¶æ€ã€‚&lt;/p></description></item><item><title>Smallest Multiple</title><link>https://hhdx.xyz/post/smallest-multiple/</link><pubDate>Wed, 18 Jan 2017 15:00:28 +0000</pubDate><guid>https://hhdx.xyz/post/smallest-multiple/</guid><description>&lt;p>2520 is the smallest number that can be divided by each of numbers from 1 to 10 without any remainder.
What is the smallest positive number that is evenly divisible by all of the number frome 1 to 20?&lt;/p>
&lt;p>åˆ†æï¼šæ±‚èƒ½å¤Ÿè¢«1åˆ°20æ•´é™¤çš„æœ€å°æ­£æ•´æ•°ï¼Œå³æ±‚æœ€å°å…¬å€æ•°ã€‚ç›¸é‚»ä¸¤ä½ä¾æ¬¡æ±‚æœ€å°å…¬å€æ•°åˆ°æœ€åå³ä¸ºæ‰€æ±‚ã€‚&lt;/p>
&lt;p>&lt;strong>Pythonå®ç°&lt;/strong>&lt;/p></description></item><item><title>10001st prime</title><link>https://hhdx.xyz/post/10001st-prime/</link><pubDate>Sun, 25 Dec 2016 15:03:53 +0000</pubDate><guid>https://hhdx.xyz/post/10001st-prime/</guid><description>&lt;p>By listing the first six prime number:2, 3, 5, 7, 11, and 13,we can see that the 6th prime is 13.What is the 10001st prime number?&lt;/p>
&lt;p>&lt;strong>python&lt;/strong>&lt;/p></description></item><item><title>Largest palindrome produc</title><link>https://hhdx.xyz/post/largest-palindrome-produc/</link><pubDate>Wed, 16 Nov 2016 14:55:59 +0000</pubDate><guid>https://hhdx.xyz/post/largest-palindrome-produc/</guid><description>&lt;p>A palindrome number reads the same both ways.The largest palindrome made from the product of two 2-digit numbers is 9009 = 91x91.
Find the largest palindrome made from the product of two 3-digit numbers.&lt;/p>
&lt;p>&lt;strong>pythonå®ç°&lt;/strong>&lt;/p></description></item><item><title>å®‰è£…debianå’Œåˆè£…debiançš„å„ç§é…ç½®</title><link>https://hhdx.xyz/post/%E5%AE%89%E8%A3%85debian%E5%92%8C%E5%88%9D%E8%A3%85debian%E7%9A%84%E5%90%84%E7%A7%8D%E9%85%8D%E7%BD%AE/</link><pubDate>Mon, 18 Jul 2016 14:51:18 +0000</pubDate><guid>https://hhdx.xyz/post/%E5%AE%89%E8%A3%85debian%E5%92%8C%E5%88%9D%E8%A3%85debian%E7%9A%84%E5%90%84%E7%A7%8D%E9%85%8D%E7%BD%AE/</guid><description>&lt;p>æ–°ä¹°äº†å°ç”µè„‘ï¼Œæƒ³è£…debianï¼Œç„¶åç”¨ä»¥å‰biosä¸‹å®‰è£…æ—¶ç”¨çš„Uç›˜ï¼Œå¼€å¯CSMï¼ˆCompatibility Support Moduleï¼‰è¿›è¡Œå®‰è£…ï¼Œç»“æœæ²¡æ³•åˆ›å»ºå¯åŠ¨é¡¹ã€‚æ‰¾äº†å¥½ä¹…å®‰è£…æ–¹æ³•ï¼Œåæ¥äº†è§£åˆ°åˆ°debianæœ‰ä¸“é—¨çš„UEFIå®‰è£…æ¨¡å¼[1]ï¼Œç”¨UltralISOé‡æ–°å†™äº†ä¸ªæ”¯æŒUEFIå¯åŠ¨çš„Uç›˜ï¼Œé‚å®‰è£…æˆåŠŸã€‚è‹¥é»˜è®¤å¯åŠ¨efiè¢«æ›´æ”¹ï¼Œå¯ä»¥ç”¨easyUEFIæ›´æ”¹å¯åŠ¨é¡ºåºã€‚&lt;/p>
&lt;h2 id="è®¾ç½®å®‰è£…æº">è®¾ç½®å®‰è£…æº&lt;/h2>
&lt;p>ä¿®æ”¹/etc/apt/sourse.listæ–‡ä»¶ï¼Œæ·»åŠ 
&lt;strong>Jessieç‰ˆæœ¬&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">deb http://mirrors.163.com/debian/ jessie main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb http://mirrors.163.com/debian/ jessie-updates main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb http://mirrors.163.com/debian/ jessie-backports main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb-src http://mirrors.163.com/debian/ jessie main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb-src http://mirrors.163.com/debian/ jessie-updates main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb-src http://mirrors.163.com/debian/ jessie-backports main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb http://mirrors.163.com/debian-security/ jessie/updates main non-free contrib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb-src http://mirrors.163.com/debian-security/ jessie/updates main non-free contrib
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¼•ç”¨è‡ª163é•œåƒç«™[2]&lt;/p></description></item><item><title>Markdownå­¦ä¹ è®°å½•</title><link>https://hhdx.xyz/post/markdown%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</link><pubDate>Fri, 17 Jun 2016 15:16:30 +0000</pubDate><guid>https://hhdx.xyz/post/markdown%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</guid><description>&lt;p>ä¸€ç›´ä»¥æ¥æƒ³è¦åšä¸€ä¸ªè‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Œç›´åˆ°æœ€è¿‘æ‰å¼€å§‹å¯»æ‰¾æ•™ç¨‹ã€‚å‘ç°äº†å¯ä»¥ä½¿ç”¨githubçš„pagesæœåŠ¡å…è´¹ç©ºé—´æ„å»ºè‡ªå·±çš„åšå®¢ï¼Œä¸»è¦å‚è€ƒäº†Sunwhutâ€™s Homeçš„æ•™ç¨‹ã€‚å»ºæˆä¹‹åå‘ç°è‡ªå·±çš„è¡¨è¾¾èƒ½åŠ›å¤ªå·®è¿˜æœ‰ç”Ÿæ´»å¤ªè¿‡æ— è¶£ï¼Œå†™ä¸äº†ä»€ä¹ˆä¸œè¥¿ï¼Œæ‰€ä»¥ç»ˆäºæ‹–åˆ°äº†ä¸ƒå¤©å¤šåâ€¦æ‰å¼€å§‹å­¦ä¹ æ­¤åšå®¢æ¡†æ¶çš„æ–‡ç« ä¹¦å†™è¯­è¨€â€”â€”Markdownã€‚è¿™ç¯‡åšå®¢æ²¡ä»€ä¹ˆä»·å€¼ï¼Œåªæ˜¯è®°å½•ä¸€ä¸‹æˆ‘åˆæ­¥å­¦ä¹ åˆ°çš„Markdownçš„ç”¨æ³•ã€‚&lt;/p>
&lt;h2 id="æ ‡é¢˜">æ ‡é¢˜&lt;/h2></description></item></channel></rss>